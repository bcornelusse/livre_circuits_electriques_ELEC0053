\documentclass{standalone}
\usepackage{circuitikz}
\usepackage[active,pdftex,tightpage]{preview}
\usepackage{siunitx}
\usepackage[latin1]{inputenc}
\PreviewEnvironment{circuitikz}
\begin{document}

\def\spaceLC{2}
\def\antennaH{1.5}
\def\antennaHead{0.3}
\def\xDemod{3}
\def\heightfs{3}
\def\heightDemod{4.5}
\def\widthDemod{4}
% \def\shifttfoconv{1}
% \def\shiftmiddleoutside{0.25}
% \def\shiftTopBotconv{2.4}
% \def\shiftmiddleconv{1}
% \def\convboxhalfsize{1}

\begin{circuitikz}[scale=0.95, transform shape,american] 
    \coordinate (RshiftLC) at (\spaceLC,0);
    \coordinate (LshiftLC) at (-\spaceLC,0);
    \coordinate (Ushift) at (0,\heightfs);
    \coordinate (Dshift) at (0,-\heightfs);


    %LC Oscillator // Bandpass
    \draw
    (0,0)coordinate(bl_corner) to  [vC,l2=$C_{var}$ and 10-280\si{\pico\farad} ] ++(Ushift) 
    coordinate(tl_corner); 

    \draw
    (bl_corner) -- ++ (RshiftLC) coordinate(bCvar) to [L,l2=$L$ and 4.7\si{\milli\henry},name=L,mirror]
    ++(Ushift) coordinate(tCvar) -- ++(LshiftLC);

    %Antenna
    \draw
    (tl_corner)++(\spaceLC/2,0) node[circ]{} to [C,l2=$C_a$ and 100\si{\pico\farad}] ++(0,\antennaH)coordinate(ant)-- ++ (0,\antennaHead);
    \draw 
    (ant)-- ++ (0.3,\antennaHead);
    \draw
    (ant)-- ++ (-0.3,\antennaHead);


    %Demodulator
    \ctikzset{resistors/width=1.2, resistors/zigs=7}
    \draw
    (L.midtap)node[circ]{}--++(0.5,0)-- ++(0,\heightfs/2)
    to [D*,l=$D_1$] ++(\xDemod,0) coordinate(KDiode) 
    to[pR,l2=$R_{pot}$ and 220\si{\kilo\ohm}, wiper pos=0.2,name=P,label distance =-20pt]++(Dshift) -- (bCvar);
    \draw 
    (KDiode)++(-0.8,0)node[circ]{} to [C,l2_=$C_1$ and 220\si{\pico\farad}]++(Dshift)node[circ]{};
    \ctikzset{resistors/width=0.6, resistors/zigs=3}

    
    %High Pass filter
    \draw
    (P.wiper)-- ++(1,0) 
    to [C,l2=$C_{2}$ and 470 \si{\nano\farad},name=Condo_hp, label distance =4pt] ++(1.5,0) coordinate (rCHP);

    %Audio amplifier LM386
    \draw
    (rCHP)-- ++(1,0)  node[op amp,anchor = -] (LM386) {LM386} (LM386.down)
     -- ++(0,-2)coordinate(groundAO) node[ground] {} (LM386.up) ++ (0,.5) 
     node[above] {9\si{\volt}} -- (LM386.up);
    
    %Bypass Capacitor
     \draw
    (LM386.down) -- ++(0.65,0.375) coordinate(bypass) 
    to [C,l2=$C_5$ and 10 \si{\micro\farad}](bypass |- groundAO) node[ground]{};
    \draw
    (groundAO)++(-1.5,0)node[ground,name=g+]{} ;
    \draw
    (g+)|-(LM386.+);
    \draw
    (groundAO -| bCvar)node[ground,name=gRec]{} ;
    
    %Ground of Receiver
    \draw
    (gRec)--(gRec |- bl_corner) node[circ]{};
    
    %(LM386.+)-- ++(-0.2,0)-- ++(0,-2) node[ground] {};

    
    \draw
    (LM386.up) ++(-0.4,0.26) -- ++(0,1) -- ++ (-1,0) -- ++(0,0.5)
     to [R,l2=$R_{g}$ and 1.2\si{\kilo\ohm},name=R_gain,label distance =9pt] ++(1.2,0)
      to [C,l2=$C_{g}$ and 10 \si{\micro\farad},name=C_gain, label distance =4pt] ++(1.2,0)
       -- ++(0,-0.5) -- ++ (-0.6,0) ;

    \draw
    (LM386.up)++(0.4,-0.26) -- ++(0,1.52);

    \draw
    (LM386.out)-- ++(2,0) to [C,l2=$C_{3}$ and 270\si{\micro\farad},name=C_3, label distance = 4pt]
     ++(1.2,0);
    
    \draw [ very thick] (C_3.right)++(0.5,-0.5) rectangle ++(0.3,1);
    
    \draw (C_3.right)++(0.8,-0.5)  -- ++(0.5,-0.5) -- ++(0,2) -- ++(-0.5,-0.5)
     coordinate(speaker);
    \draw 
    (speaker)-- (speaker |- groundAO)node[ground] {};
    \node at ([shift={(0,1.2)}]speaker) {$R_L$ };
    \node at ([shift={(0,0.7)}]speaker) {4-32 \si{\ohm} };
    

    \draw
    (C_3.left)++(-1.5,0)node[circ]{}to [C,l2=$C_{4}$ and 47\si{\nano\farad},name=C_4]
     ++(0,-1.5)to [R,l2=$R_{4}$ and 10\si{\ohm},name=R_4] ++(0,-1);
       
    \draw 
    (R_4.right)--(R_4.right |- groundAO)node[ground]{};

   

    %Surroundings Demod 1
    \draw
    (tCvar) ++(1,0) coordinate(startDemod);

    \draw[rounded corners=5pt, fill=blue!20, opacity=0.3, line width=0.5pt]
    (startDemod) 
    ++(0, 1) --
    ++(\widthDemod, 0) --
    ++(0, -\heightDemod) --
    ++(-\widthDemod, 0) --
    cycle;

    % Add text in the bottom-right corner of the rectangle
    \draw (startDemod)++(0.99*\widthDemod,-0.99*\heightDemod+1) 
    node[anchor=south east] {2 - Démodulateur AM};

\end{circuitikz}

% \begin{circuitikz}
%     % Thevenin equivalent (sinusoidal voltage source and series impedance)
%     \draw (0,0) node [ground,name=ground] {};

%     \draw (0,0) to[sV, l_=$V_{th}$] (0,3)
%           to[generic, l_=$Z_{th}$] ++(3,0) coordinate (pcc);

    
    

%     % Transformer primary winding
   
%     \draw (pcc) ++ (1,0) coordinate(primCenter) node[circle, draw, scale=3, name=prim] {};
%     \draw (primCenter) node[scale = 2] {$\Delta$}; % Delta connection symbol
%     \draw (prim.west) to[short] (pcc);
%     % Transformer secondary windings
    
%     \draw (primCenter) ++(0.69,0.4) coordinate (secYcenter) node[circle, draw,scale=3, name=secY] {};
%     \draw (secYcenter) node[scale = 2] {$Y$}; % Wye connection symbol


%     \draw (primCenter) ++(0.69,-0.4) coordinate (secDcenter) node[circle, draw,scale=3, name=secD] {};
%     \draw (secDcenter) node[scale = 2] {$\Delta$}; % Wye connection symbol

%     % Thyristor bridges with rectangle boxes
%     \draw (secY.east) -- ++(1,0) -- ++(0,1.2)-- ++(1,0) coordinate (westY) -- ++(0,1) -- ++(2,0) -- ++(0,-1) coordinate (eastY);
%     \draw (eastY) -- ++(0,-1) -- ++(-1,0) coordinate (southY) -- ++(-1,0)-- ++(0,1);
%     \draw (southY)++(0,0.5) to[thyristor, l_=$T_1$] ++(0,1);

%     \draw (secD.east) -- ++(1,0) -- ++(0,-1.2) -- ++(1,0)coordinate (westD) -- ++(0,1) -- ++(2,0) -- ++(0,-1) coordinate (eastD);
%     \draw (eastD) -- ++(0,-1) -- ++(-1,0) coordinate (southD) -- ++(-1,0)-- ++(0,1);
%     \draw (southD)++(0,0.5) to[thyristor, l_=$T_2$] ++(0,1);

%     % Add three slashes to represent three-phase wires
%     \draw (pcc) node[] {///};
%     \draw (westY) ++(-0.6,0)node[] {///};
%     \draw (westD) ++(-0.6,0)node[] {///};
    

%     % Interphase inductor
%     \draw (eastY) ++ (0,0.6) coordinate(outY+) -- ++(1,0)
%           to[cute choke, twolineschoke, l_=$L_i$, name=Ly] ++(1,0) coordinate (LeastY);
%     \draw (eastD) ++ (0,0.6) coordinate(outD+) -- ++(1,0)
%           to[cute choke, twolineschoke, l_=$L_i$, name=Ld] ++(1,0) coordinate (LeastD);

%     \draw (Ly.left)  ++ (-0.1,0.25) node[circle, fill, inner sep=1pt] {};
%     \draw (Ld.right) ++ (0.1,0.25) node[circle, fill, inner sep=1pt] {};

%     % DC ground 
%     \draw (eastD) ++ (0,-0.6) coordinate(outD-) -- ++(1,0) node[sground] {};
%     \draw (eastY) ++ (0,-0.6) coordinate(outY-) -- ++(1,0) node[sground] {};

%     % Output Inductor
%     \draw (LeastY) -- ++ (0.5,0) -- ++(0,-0.5) coordinate (out+);
%     \draw (LeastD) -- ++ (0.5,0) -- (out+);
%     \draw (out+) to [L, l_=$L_o$] ++(2, 0) coordinate (ely+);

%     % Connecting to the Electrolyzer equivalent circuit
%     \draw (ely+) -- ++ (0.5,0)
%           -- ++(0,-1)
%           to[R, l={$R_{ely}$}] ++(0,-1.5)
%           to[battery1 , l=$V_{rev}$] ++(0,-1.5)
%           -- ++(-0.5,0) coordinate (ely-);
%     \draw (ely-) -- ++(-1,0) node[sground] {};

%     % Add rectangle box around the Electrolyzer equivalent circuit
%     \draw (ely-)++(2.4,-0.5) coordinate(elyboxBotRight);
%     \draw[dashed]  (ely+)++(-0.25,0.25) coordinate(elyboxTopLeft) rectangle(elyboxBotRight);
%     \draw (elyboxTopLeft) ++ (1.2,0.15) node[color=blue] {Electrolyzer};
% \end{circuitikz}

\end{document}